# redo log

redo log是Mysql中重要的日志，是在Innodb存储引擎中实现。是用来保持Mysql的持久性，它是物理日志，保证在数据库发生异常重启时，之前提交的记录不会丢失，这个能叫做`crash-safe`。

### 为什么要有redo log？

执行一个写操作，如果每次都写入磁盘，那么肯定会导致大量的磁盘IO消耗，为了解决频繁写磁盘，Innodb实现了redo log。

当执行一个更新操作时，先找到数据并放到内存中（如果内存中已经存在则不需要去磁盘中找），然后更新内存中这一条数据，然后写入redo log（先写内存redo log，异步写入磁盘redo log）中，直接返回成功，等待空闲或者redo log内存写满时，再写入磁盘。

# binlog

binlog同样也是Mysql中重要的日志，又叫做重放日志，他是逻辑日志，在Server层中实现。

binlog是将每一次写操作的语句写入到磁盘中，且是追加日志，用来做数据的恢复。

### 如何利用binlog恢复数据

1. 一般定时备份全量数据，找到离事故最近的一份全量备份数据。

2. 再找到从全量备份数据开始到发生事故这段时间的binlog。

3. 重放binlog，进行数据恢复。
