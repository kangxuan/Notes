# 基础

1. char和varchar有什么区别？

```
char: 是定长字符串类型，需要指定长度，指定多少长度就占用多少，和字段值无关。
varchar：是变长字符串类型，也需要指定长度，指定长度是最大占用长度，会根据字段值实际
长度来判断具体占用多少
区别：char比varchar性能更高，因为不用根据具体的值进行扩容。
```

2. 查询的ID在左边补齐7位0

```sql
SELECT LPAD(id, 7, '0') FROM t_user LIMIT 1;
```

3. 查询字段值截取前10位长度的内容，如果本身长度就小于等于10就原样输出，否则最后加上...

```sql
SELECT 
	CASE
	WHEN CHAR_LENGTH(product_name) <= 10 THEN product_name
	ELSE CONCAT(SUBSTRING(product_name, 1, 10),'...')
END AS modified_product_name
FROM product;
```

4. 生成6位随机数

```sql
# 需要向左补齐0，因为生成的随机数可能为0.0011023这样的
select lpad(floor(rand() * 1000000), 6, '0');
```

# 中级

1. 事务的四大特性

```
1. 原子性：事务是不可分割的最小操作单元，要么全部成功，要么全部失败。
2. 一致性：事务完成后，必须使所有的数据都保持一致性，通过数据库约束等来保证一致性。
3. 隔离性：数据库系统提供的隔离机制，保证事务在外部并发的影响下不受影响，是独立环境下
运行。
4. 持久性：事务提交或回滚后，数据的改变是永久的。
```

2. 并发的事务问题

```
1. 脏读
    是读取到其他未提交事务的数据
    比如A和B事务，B修改了数据但未提交，A读取到数据已经被修改了。
2. 不可重复读
    一个事务先后读取相同数据，两次数据不一致
    比如A和B事务，A先读到数据，B修改数据已经提交，然后A再次读取发现数据不一致。
3. 幻读
    一个事务先查询没有读取到数据，然后插入，再插入时发现数据已经存在
    比如说A和B事务，A先查询数据不存在，B先插入了数据并提交，A插入数据失败，然后再次查询
发现数据已经存在，仿佛出现了“幻象”
```




