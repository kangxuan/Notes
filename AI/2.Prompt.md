# prompt原理

大模型在处理提示器时，模型会将输入的提示器转换为一系列的词向量。然后，模型通过自回归生成过程逐个生成回答中的词汇。在生成每个词时，模型会基于输入的Prompt以及前面生成的所有词来进行预测。这个过程不断重复，直到模型生成完整的回答。

有效的Prompt可以：

1. 提升AI模型给出的答案的质量

2. 缩短与AI模型的交互时间，提高效率

3. 减少误解，提高沟通的顺畅度。

# 提示词策略差异

#### 1、通用模型

- 需要显式引导推理步骤，比如通过CoT提示，否则可能会忽略关键逻辑

- 依赖提示词补偿能力短板，比如要求分步骤思考，提供few-shot参考示例等

#### 2、推理模型

- 提示语更简洁，指需要明确任务目标和需求，因为模型已经内化了推理逻辑

- 无需逐步指导，模型会自动生成结构化推理过程，如果强行不步骤拆解，反而会降低其推理能力

# 提示词关键原则

通用模型更像文科生，推理模型则更像理科生

#### 1、模型选择

根据任务类型选择，而非模型热度，比如创意类任务选择通用模型，数学、物理、编程等like推理类任务选择推理模型

#### 2、提示词设计

通用模型：需要结构化、补偿性引导，缺什么补什么

推理模型：简洁指令、聚焦目标、信任其内化能力，需要什么说什么

#### 3、规避误区

不要对通用模型过度信任，如直接问复杂推理问题，需要分步骤进行；

不要对推理模型进行启发式（简单）提问，推理模型会给你过于复杂的深度结果。

对于复杂问题，推理模型依然会有错误的可能，或存在忽略某些细节的可能，这时需要多次交互。

# 提示词编写原则

#### 1、明确目标

清晰定义任务，以便模型理解，要讲明白你要做的是什么？

#### 2、具体指导

给予模型明确的指导和约束。

**case1:文本摘要生成任务目标**

```context
# 不明确的指导：
请为这篇新闻文章生成摘要。

# 明确的指导：
请将以下新闻文章总结为3-4句话，包含主要事件、人物和时间地点。
```

**case2:客户服务对话任务目标**

```context
# 不明确的指导：
请回答客户关于订单状态的问题。

# 明确的指导：
请使用礼貌的语言回答客户关于订单状态的问题，提供具体的订单信息和预计到达时间。
如果订单有任何问题，请提供解决方案或进一步的联系信息。
```

**case3:生成 a beautiful girl 的图片**

```context
# 不明确的指导：
a beautiful girl

# 明确的指导：
anime girl with long dark hair , simple and elegant style, light 
silver and light gray, wavy resin sheets , in the style of digital 
painting, gongbi, realistic yet romantic, shiny/glossy, cute 
and dreamy, smooth lines, pure white background,
```

#### 3、简洁明了

使用简练、清晰的语言表达Prompt。

**case1:文章续写任务目标**

```context
# 冗长的指导：
请基于下面提供的故事开头续写一段文字。续写时请保持与原文风格一致，注意故事的连贯性和合理性。
希望续写的部分能够引人入胜，并且能够自然地衔接上文。如果有任何疑问，请尽量参照原文的风格进行。

# 简洁明了的指导：
根据以下开头续写故事：
```

**case2:翻译任务任务目标**

```context
# 冗长的指导：
请将以下英文文本翻译成中文。我希望翻译的内容准确，并且保持原文的意思。翻译时请注意语法和用词，
尽量使用简洁明了的语言表达。如果有任何不确定的地方，请尽量保持原意，不要进行过多的自由发挥。下面是需要翻译的文本。

# 简洁明了的指导：
请将以下英文文本翻译成中文：
```

具体指导和简洁明了看似是相悖的，但实际上不是，具体指导是要将需求说明白，要有更多的细节，简洁明了是减少废话。

#### 4、适当引导

通过示例或问题边界引导模型。

**case1：邮件撰写**

```context
# 无引导的指导：
请写一封请假邮件。

# 有引导的指导：
请写一封请假邮件，内容包括请假原因、请假时间以及对工作的安排。
示例：
主题：请假申请
尊敬的[经理姓名]，
我因个人原因需要请假两天，从6月20日至6月21日。请假期间，我会确保手头工作交接给同事[同事姓名]，并保持电话畅通。如
有紧急情况，可随时联系我。感谢您的理解和批准。
此致
敬礼
[您的姓名]
```

如果有优秀范例模版，对于模型来说是很好的指导。

#### 5、迭代优化

根据输出结果，持续调整和优化，给大模型提供更多的思维链（CoT）指导，帮助大模型给到更优的结果。

**case1：帮我写一个 a+b的Python函数**

```content
# 第一次提问：
帮我写一个 a+b的Python函数

# 第一次回答：
下面是一个简单的Python函数，用于计算两个数a和b的和：
def add(a, b):
return a + b
# 示例使用
result = add(3, 5)
print(result) # 输出: 8

# 第二次矫正：
需要考虑 a和b不是数值的情况

# 第二次回答：
为了处理 a 和 b 可能不是数值的情况，可以在函数中添加类型检
查，并在参数不是数值时抛出一个适当的异常。以下是一个改进
的版本：
def add(a, b):
if not isinstance(a, (int, float)) or not isinstance(b, (int, float)):
    raise TypeError("Both a and b must be numbers (int or float)")
return a + b
```

# Prompt编写框架（重要性排序）

**任务** > **上下文** > **示例** > **角色** > **格式** > **语气**

**1、任务：**

始终以动词开始任务句子（如"生成"，"给予"，"写作"等），明确表达你的最终目标，可以有多个。

**2、上下文：**

提供上下文背景、所处环境等。

**3、示例：**

提供具体的例子，用于可以提高输出质量。有时候我们没有示例，这时可以让GPT帮忙生成示例。

**4、角色：**

你希望AI扮演的角色，可以是具体的人，也可以是虚拟的角色等。

**5、格式：**

你希望输出的格式，如表格、列表、段落等。

**6、语气：**

指定输出的语气，如正式、非正式、幽默等。

```context
prompt更通用的模版 =
prompt = f"""
# 目标/任务
{instruction}

# 上下文
{context}

# 示例
{example}

# 角色扮演
{role_play}

# 格式
{response_format}

# 语气
{tone}

# 用户输入
{input_text}
"""
```

# Prompt编写技巧

#### 技巧1：限制模型输出的格式

比如让大模型输出JSON格式，可以结构化数据，方便后续解析

**case1：整理上市公司的财报数据**

```context
# 提问：请从中国上市科技公司的2025年财务报表中提取以下信息，包括：公司名称，股票代码，营收，净利润，毛利，总资产，总负债。并以JSON格式返回。

# 返回：
[
  {
    "公司名称": "宁德时代",
    "股票代码": "300750.SZ",
    "营收": 1788.86,
    "净利润": 305.12,
    "毛利": null,
    "总资产": null,
    "总负债": null,
    "数据期间": "2025年上半年",
    "货币单位": "亿元人民币"
  },
  {
    "公司名称": "飞鱼科技",
    "股票代码": "01022.HK",
    "营收": 4.51,
    "净利润": 0.58,
    "毛利": null,
    "总资产": null,
    "总负债": null,
    "数据期间": "2025年上半年",
    "货币单位": "亿元人民币"
  }
]
```

#### 技巧2：使用分隔符区分输入的不同部分

在编写Prompt时，通过使用分隔符，可以清晰地区分不同部分的文本，提升文本的组织性和可读性。

```context
请把三个引号括起来的文本，分别总结成为一句话
'''文本内容1'''
'''文本内容2'''。
```

#### 技巧3：提供样例

针对有一定歧义或复杂的情况，给出具体示例方便大模型进行学习

**case1:黑话、反话**

```context
请帮我对用户的评价进行分类，直接输出：正面/负面，并给出理由
示例1：
用户评价：这次开户真是太满意了，都一周了，客服还没有回复我
输出：负面，客户并不是真的满意，客服一周未回复，造成了不满。
示例2：
用户评价：广发银行的开户过程非常顺利，客服态度亲切。
输出：正面，开户过程顺利，客服态度好。
请回答如下问题：
用户评价：开户流程简洁明了，不需要繁琐的纸质材料，所有步骤都可以在线完成
```

#### 技巧4：CoT 思维工具

CoT（Chain of Thought，思维链）通过将复杂任务分解为多个简单的步骤，帮助模型系统地思考并解决问题。

**case1：数学解题思路**

```context
你是一个数学助手，请根据以下步骤计算用户输入的金额。请将每个金额首先加上1000元，接着减去500元，然后乘以1.2输出计算结果，以','作为分隔符进行返回。
你可以参考以下计算过程来帮助解决：
"""
对于输入：2000, 3000, 4000
计算过程如下：
首先分别对输入的2000, 3000, 4000加上1000，得到：3000, 4000, 5000
然后将3000, 4000, 5000分别减去500，得到：2500, 3500, 4500
然后将2500, 3500, 4500分别乘以1.2，得到：3000, 4200, 5400
答案是：3000, 4200, 5400
"""
输入：1500, 2500, 3500
```

**case2：客服处理问题逻辑**

```context
你是一个客户服务助手，请按照以下步骤处理客户的投诉。首先，记录客户的投诉类型，然后确定处理优先级（高、中、低），接着分配给适当的部门，最后生成一个处理跟踪编号并直接输出。
计算过程示例：
"""
客户投诉：客服的态度冷淡，没有耐心解答我的问题。
处理过程如下：
首先记录客户的投诉类型，得到：客服态度差
然后确定处理优先级，得到：优先级高
然后分配给适当的部门，得到：客服部
最后生成一个跟踪编号，得到 KF10001
"""
客户投诉：我的账户意外冻结了。我并未收到任何提前通知或解释。
```

**CoT的作用：**

1. 系统化问题解决：将复杂问题分解为多个简单步骤，使解决过程更加有序和清晰。

2. 提高透明度，减少错误：帮助理解和追踪每个决策点，减少整体错误发生的概率。

3. 提升模型推理能力：帮助模型学习如何系统地分解和解决此类问题，提高在类似任务中的表现。

#### 技巧5：面向不同的角色进行讲解

根据面向的角色不同，让AI给出对应角色的解释

```context
# 提问：
把我当做五岁小朋友一样，向我解释AI

# 回答：
想象一下，你有一个超级聪明的电子小宠物，它住在一个小盒子里（比如妈妈的手机或者平板电脑）。

它一开始什么都不会
就像刚出生的小宝宝，不认识小猫、小狗，也不知道“苹果”是什么。

但是，它学习超级快！
你给它看很多很多很多 小猫的照片，并且告诉它：“看，这个毛茸茸、有胡须的是小猫哦！”
你给它听很多很多 首歌，告诉它：“这首歌是开心的，那首歌是睡觉听的。”
它的小脑袋（我们叫它“电脑大脑”）就会拼命地记啊、学啊。

学完之后，它就能帮你啦！

当你再用手机给一只真小猫拍照时，它马上就会跳出来说：“主人主人，这是一只小猫！”

当你对妈妈说“小爱同学，播放宝宝巴士”，它听到后，就能明白你的意思，马上给你放歌。

它还能帮你下棋，推荐你可能爱看的动画片！

所以，AI就是一个你喂给它很多“知识”（照片、声音、信息），它就能变得超级厉害，然后帮你做事情的电子小帮手！

它就像给你的玩具和电脑施了一个魔法，让它们能听懂你的话，看懂你的画，变成你的好朋友！是不是很酷？
```

# 练习

**1、我们想让AI扮演电信的客服人员，如何识别用户的手机流量套餐的需求？**
